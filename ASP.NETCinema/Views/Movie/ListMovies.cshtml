@model IEnumerable<ASPNETCinema.ViewModels.MovieViewModel>

@{
    ViewData["Title"] = "ListMovies";
    int count = 0;

}
<link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true" />

<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000" style="width: 138%; height:100%;  margin-bottom: 1%; margin-top: -0.4%; margin-left: -19%;">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <a href="/Movie/DetailsMovie/19">
                <img src="https://shyfyy.files.wordpress.com/2019/01/johnwick3-3.jpg" alt="John Wick 3" class="img-responsive" style="max-height: 458px;" width="100%" ; />
            </a>
            <div class="carousel-caption" role="option">
                <p>
                    Legendary hit man John Wick must fight his way out of New York when a $14 million contract on his life makes him the target of the world's top assassins.
                    <br>
                    <a class="btn btn-default" style="background-color: #bf5a16;" href="/Movie/DetailsMovie/19">Get Tickets</a>
                </p>
            </div>
        </div>
        <div class="item">
            <a href="/Movie/DetailsMovie/6">
                <img src="https://i.imgur.com/pTmvVqg.jpg" alt="Star Wars The Last Jedit" class="img-responsive" style="max-height: 458px;" width="100%" ; />
            </a>
            <div class="carousel-caption" role="option">
                <p>
                    Rey develops her newly discovered abilities with the guidance of Luke Skywalker, who is unsettled by the strength of her powers. Meanwhile, the Resistance prepares for battle with the First Order.
                    <br>
                    <a class="btn btn-default" style="background-color: #bf5a16;" href="/Movie/DetailsMovie/6">
                        Get Tickets
                    </a>
                </p>
            </div>
        </div>
        <div class="item">
            <a href="/Movie/DetailsMovie/20">
                <img src="https://shyfyy.files.wordpress.com/2018/05/avengers3-44.jpg" alt="Avengers Infinity War" class="img-responsive" style="max-height: 458px;" width="100%" ; />
            </a>
            <div class="carousel-caption" role="option">
                <p>
                    The Avengers and their allies must be willing to sacrifice all in an attempt to defeat the powerful Thanos before his blitz of devastation and ruin puts an end to the universe.
                    <br>
                    <a class="btn btn-default" style="background-color: #bf5a16;" href="/Movie/DetailsMovie/20">
                        Get Tickets
                    </a>
                </p>
            </div>
        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

@if (User.IsInRole("Administrator"))
{
    <a asp-action="AddMovie">Add New Movie</a>
}

<li class="dropdown" style="list-style-type: none;">
    <a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fas fa-2x">OrderBy </i> <span class="caret"></span></a>
    <ul class="dropdown-menu">
        <li>
            <a href="/Movie/ListMovies/?orderBy=Name">Name</a>
        </li>
        <li>
            <a href="/Movie/ListMovies/?orderBy=MovieType">Movie Type</a>
        </li>
        <li>
            <a href="/Movie/ListMovies/?orderBy=ReleaseDate">Release Date</a>
        </li>
        <li>
            <a href="/Movie/ListMovies/?orderBy=MovieLenght">Movie Lenght</a>
        </li>
        <li>
            <a href="/Movie/ListMovies/?orderBy=LastScreeningDate"> Last Screening Date</a>
        </li>
    </ul>
</li>


<div id="navbar" style="background-color: #2b3e50;">
    <a class="active" href="javascript:void(0)" ><a class="fa fa-1x" href="/Movie/ListMovies/?orderBy=Name">Today @DateTime.Today.Day</a></a>
    <a href="javascript:void(0)" style="margin-right: 2.5%;" ><a class="fa fa-1x" href="/Movie/ListMovies/?orderBy=MovieType">Tomorrow @DateTime.Today.AddDays(1).Day</a></a>
    <a href="javascript:void(0)" style="margin-right: 2.5%;"> <a class="fa fa-1x" href="/Movie/ListMovies/?orderBy=ReleaseDate">@DateTime.Today.AddDays(2).DayOfWeek @DateTime.Today.AddDays(2).Day </a></a>
    <a href="javascript:void(0)" style="margin-right: 2.5%;"> <a class="fa fa-1x" href="/Movie/ListMovies/?orderBy=MovieLenght">@DateTime.Today.AddDays(3).DayOfWeek @DateTime.Today.AddDays(3).Day</a></a>
    <a href="javascript:void(0)" style="margin-right: 2.5%;"> <a class="fa fa-1x" href="/Movie/ListMovies/?orderBy=LastScreeningDate">@DateTime.Today.AddDays(4).DayOfWeek @DateTime.Today.AddDays(4).Day</a></a>
</div>
<script>
window.onscroll = function() {myFunction()};

var navbar = document.getElementById("navbar");
var sticky = navbar.offsetTop;

function myFunction() {
  if (window.pageYOffset >= sticky) {
    navbar.classList.add("sticky")
  } else {
    navbar.classList.remove("sticky");
  }
}
</script>






<table class="table table-dark">
    <tbody>
        @foreach (var item in Model)
        {
            count++;
            <tr>
                <td width="17%">

                    <a href="/Movie/DetailsMovie/@Html.DisplayFor(modelItem => item.Id)">
                        <img src="@Html.DisplayFor(modelItem => item.ImageString)" alt="Image: @Html.DisplayFor(modelItem => item.Name)" width="160" height="220">
                    </a>
                </td>
                <td>
                    <p>
                        <a class="small" href="/Movie/DetailsMovie/@Html.DisplayFor(modelItem => item.Id)">
                            <i class="fas fa-3x">@Html.DisplayFor(modelItem => item.Name)</i>
                        </a>
                    </p>
                    <p>
                        @foreach (var screening in item.Screenings)
                        {
                            <a class="small" style="display:inline-block; width:100px; height:50px; font-family: Lato; border:2px solid #000000;" href="/Screening/DetailsScreening/@Html.DisplayFor(modelItem => screening.Id)">
                                <i class="fas fa-2x" style="padding-top: 10px; padding-left: 8px;">@Html.DisplayFor(modelItem => screening.TimeOfScreening)</i>
                            </a>
                        }
                    </p>

                </td>
                <td class="fas fa-1x" align="right" width="80%">
                    @if (User.IsInRole("Administrator"))
                    {
                        @Html.ActionLink("Edit", "EditMovie", new { id = item.Id });
                        <a> | </a>
                        @Html.ActionLink("Delete", "DeleteMovie", new { id = item.Id });
                        <a> | </a>
                    }
                    @Html.ActionLink("Details", "DetailsMovie", new { id = item.Id })


                </td>
            </tr>
            @if (count != Model.Count())
            {
                <tr><td><hr class="style1" width="580%"></td></tr>
            }


        }
    </tbody>
</table>
